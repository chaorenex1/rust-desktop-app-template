# 聊天历史记录功能 - 用户指南

## 功能概述

聊天历史记录功能允许您：
- 📝 自动保存所有对话会话
- 📚 浏览和搜索历史会话
- 🔄 加载之前的对话继续聊天
- ✏️ 为会话添加自定义名称
- 🗑️ 删除不需要的会话

## 快速开始

### 1. 自动保存会话

**无需任何操作！** 每次发送消息后，系统会自动保存当前对话到历史记录中。

### 2. 查看历史记录

1. 在聊天面板顶部工具栏找到**时钟图标** 🕒
2. 点击图标打开"聊天历史"对话框
3. 浏览您的所有历史会话

### 3. 搜索会话

1. 在历史对话框顶部的搜索框中输入关键词
2. 系统会实时过滤匹配的会话
3. 支持搜索会话名称和消息内容

### 4. 预览会话

1. 在左侧列表中点击任意会话
2. 右侧面板会显示该会话的完整消息记录
3. 可滚动查看所有历史消息

### 5. 加载会话

1. 在预览面板中，点击"**加载此会话**"按钮
2. 当前聊天面板的消息会被替换为该历史会话
3. 现在可以继续之前的对话

### 6. 重命名会话

1. 在会话列表中，点击会话右侧的**编辑图标** ✏️
2. 输入新的会话名称
3. 点击"保存"或按Enter键确认
4. 点击"取消"或按Esc键放弃修改

### 7. 删除会话

1. 在会话列表中，点击会话右侧的**删除图标** 🗑️
2. 确认删除操作
3. 会话将从历史记录中永久删除

## 功能详解

### 会话列表信息

每个会话显示以下信息：
- **会话名称**：自定义名称或"未命名会话"
- **消息数量**：该会话包含的消息条数
- **更新时间**：最后一次更新的时间
- **首条消息预览**：会话的第一条消息内容（部分）

### 时间显示规则

- 今天的会话：显示具体时间（如 "14:30"）
- 昨天的会话：显示 "昨天 14:30"
- 7天内的会话：显示 "X天前"
- 更早的会话：显示日期（如 "12-15"）

### 会话排序

会话列表按**更新时间倒序**排列，最近更新的会话显示在最上面。

## 使用技巧

### 💡 技巧1：为重要会话命名

给重要的对话添加有意义的名称，方便日后快速找到：
- "Vue 3 架构讨论"
- "项目需求分析"
- "Bug修复方案"

### 💡 技巧2：利用搜索功能

当会话很多时，使用搜索功能快速定位：
- 搜索会话名称
- 搜索关键消息内容
- 搜索特定主题

### 💡 技巧3：定期清理

删除不再需要的会话，保持列表整洁：
- 测试性对话
- 无用的短对话
- 过时的讨论

### 💡 技巧4：继续之前的对话

遇到类似问题时，加载相关的历史会话：
- AI能更好地理解上下文
- 避免重复解释
- 保持对话连贯性

## 常见问题

### Q1: 会话保存在哪里？

**A:** 会话保存在您的本地计算机上：
- Windows: `C:\Users\<用户名>\.aduib-app\chat-sessions\`
- macOS: `~/.aduib-app/chat-sessions/`
- Linux: `~/.aduib-app/chat-sessions/`

每个会话是一个独立的JSON文件。

### Q2: 可以保存多少个会话？

**A:** 理论上没有限制，但为了性能考虑，对话框默认只加载最近50个会话。如果有更多会话，可以通过搜索功能查找旧会话。

### Q3: 如何备份我的会话？

**A:** 直接复制 `.aduib-app/chat-sessions/` 目录到安全位置即可。每个会话都是一个可读的JSON文件。

### Q4: 删除的会话可以恢复吗？

**A:** 不可以。删除会话后，对应的文件会被永久删除。请谨慎删除。

### Q5: 为什么我的会话没有自动保存？

**A:** 可能的原因：
- 还没有发送任何消息
- 文件系统权限问题
- 检查浏览器控制台是否有错误信息

### Q6: 会话文件会占用很多空间吗？

**A:** 一般不会。单个会话通常只有几KB到几十KB。但长时间使用后，可能需要定期清理旧会话。

### Q7: 可以在不同设备间同步会话吗？

**A:** 目前不支持。会话仅保存在本地。您可以手动复制会话文件到其他设备。

### Q8: 加载历史会话会替换当前对话吗？

**A:** 是的。加载历史会话后，当前的消息会被替换。如果当前对话很重要，建议先确保它已经被保存（发送过至少一条消息）。

### Q9: 搜索是否区分大小写？

**A:** 不区分。搜索会自动转换为小写进行匹配。

### Q10: 可以导出会话为其他格式吗？

**A:** 目前不支持。会话以JSON格式存储，您可以手动打开文件查看或使用其他工具转换。

## 键盘快捷键

| 操作 | 快捷键 |
|------|--------|
| 保存会话名称 | Enter |
| 取消编辑 | Esc |
| 清除搜索框 | 点击 X 图标 |

## 界面元素说明

### 工具栏按钮

- **🕒 时钟图标**：打开聊天历史对话框
- **📎 链接图标**：关联当前文件
- **🗑️ 删除图标**：清空当前聊天

### 会话列表

- **会话卡片**：点击选中，双击加载
- **✏️ 编辑图标**：重命名会话
- **🗑️ 删除图标**：删除会话
- **高亮边框**：当前选中的会话

### 预览面板

- **消息气泡**：与聊天面板样式一致
- **滚动条**：上下滚动查看消息
- **关闭按钮**：关闭对话框
- **加载按钮**：加载会话到聊天面板

## 注意事项

⚠️ **重要提示**：
1. 删除操作不可恢复，请谨慎操作
2. 加载历史会话会替换当前对话
3. 关键对话建议及时命名，方便查找
4. 定期检查磁盘空间，清理无用会话

## 反馈与支持

如果您遇到问题或有功能建议，请：
1. 查看浏览器控制台错误信息
2. 检查会话文件目录是否可访问
3. 联系开发团队或提交Issue

---

**享受聊天历史功能！** 🎉
